{% extends "base.html" %}
{% block title %}Post new task{% endblock %}

{% block content %}
<h1>Post a new micro-job</h1>

<form method="post" class="form-card">
  <label>Title
    <input type="text" name="title" required>
  </label>

  <label>Description
    <textarea name="description" rows="4" required></textarea>
  </label>

  <label>Budget (AZN)
    <input type="number" name="budget" step="0.1" required>
  </label>

  <label>Category
    <select name="category" required>
      <option value="">-- Select a category --</option>
      <optgroup label="Online Jobs">
        <option value="IT & Programming">IT & Programming</option>
        <option value="Graphic & Design">Graphic & Design</option>
        <option value="Writing & Translation">Writing & Translation</option>
        <option value="Marketing & SMM">Marketing & SMM</option>
        <option value="Education & Tutoring">Education & Tutoring</option>
        <option value="Virtual Assistant">Virtual Assistant</option>
        <option value="Data / AI Tasks">Data / AI Tasks</option>
      </optgroup>
      <optgroup label="Offline Jobs">
        <option value="Delivery">Delivery</option>
        <option value="Home & Repair Services">Home & Repair Services</option>
        <option value="Event & Photography">Event & Photography</option>
        <option value="Construction & Labor">Construction & Labor</option>
        <option value="Agriculture">Agriculture</option>
        <option value="Transportation">Transportation</option>
      </optgroup>
    </select>
  </label>

  <label>Mode
    <select name="mode" id="mode-select">
      <option value="online">Online</option>
      <option value="offline">Offline</option>
    </select>
    <small style="display: block; margin-top: 4px; color: var(--text-secondary); font-size: 12px;">
      Mode is automatically set based on the selected category
    </small>
  </label>

  <label>Required skill
    <input type="text" name="required_skill" placeholder="e.g. social media, canva">
  </label>

  <label>Difficulty
    <select name="difficulty">
      <option value="beginner">Beginner</option>
      <option value="intermediate">Intermediate</option>
      <option value="advanced">Advanced</option>
    </select>
  </label>

  <button type="submit" class="btn-primary">Create task</button>
</form>

<script>
  // Auto-update mode based on selected category
  const categorySelect = document.querySelector('select[name="category"]');
  const modeSelect = document.getElementById('mode-select');
  
  const onlineCategories = [
    'IT & Programming', 'Graphic & Design', 'Writing & Translation',
    'Marketing & SMM', 'Education & Tutoring', 'Virtual Assistant', 'Data / AI Tasks'
  ];
  
  const offlineCategories = [
    'Delivery', 'Home & Repair Services', 'Event & Photography',
    'Construction & Labor', 'Agriculture', 'Transportation'
  ];
  
  categorySelect.addEventListener('change', function() {
    const selectedCategory = this.value;
    if (onlineCategories.includes(selectedCategory)) {
      modeSelect.value = 'online';
    } else if (offlineCategories.includes(selectedCategory)) {
      modeSelect.value = 'offline';
    }
  });
</script>
{% endblock %}
